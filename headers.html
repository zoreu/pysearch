<html>
<head>
    <link rel="stylesheet" href="https://pyscript.net/unstable/pyscript.css" />
    <script defer src="https://pyscript.net/unstable/pyscript.js"></script>
</head>
<body>
    <py-script>
from pyodide.http import pyfetch
import re
def resolve_streamtape(data):
  #https://streamtape.com/e/bVGYzl8q97CPZQr?color=140,122,230 
  try:
    url = url.split("?")[0]
  except:
    pass
  stream = False
  subs_final = []
  if data:
    r = data
    # scrape stream
    src = re.findall(r'''ById\('.+?=\s*(["']//[^;<]+)''', r)
    if src:
        src_url = ''
        parts = src[-1].replace("'", '"').split('+')
        for part in parts:
            p1 = re.findall(r'"([^"]*)', part)[0]
            p2 = 0
            if 'substring' in part:
                subs = re.findall(r'substring\((\d+)', part)
                for sub in subs:
                    p2 += int(sub)
            src_url += p1[p2:]
        src_url += '&stream=1'
        stream = src_url
  return stream
url = 'https://streamtape.com/e/olMaK8dGmbIJl4y?color=140,122,230 '
headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36'}
response = await pyfetch(url,headers=headers)
data = await response.string()
#stream = resolve_streamtape(data)
#print(stream)
print(data)
    </py-script>
</body>
</html>